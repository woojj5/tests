# μ„λ²„ μ§μ ‘ μ ‘κ·Ό μ„¤μ • (ν¬νΈν¬μ›λ”© μ—†μ΄)

## π― λ©ν‘

ν¬νΈν¬μ›λ”© μ—†μ΄ μ„λ²„μ—μ„ μ§μ ‘ μ„λΉ„μ¤λ¥Ό λ„μ› μ™Έλ¶€μ—μ„ μ ‘κ·Ό κ°€λ¥ν•κ² μ„¤μ •

## β… ν„μ¬ μƒνƒ

- Docker Composeλ” μ΄λ―Έ `0.0.0.0:ν¬νΈ`λ΅ μ„¤μ •λμ–΄ μμ–΄ λ¨λ“  μΈν„°νμ΄μ¤μ—μ„ μ ‘κ·Ό κ°€λ¥
- κ³µμΈ IP: `59.14.241.229` (λλ” ν™•μΈλ IP)
- μ„λ²„ IP: `192.168.100.90` (λ‚΄λ¶€ IP)

## π€ μ‹¤ν–‰ λ°©λ²•

### 1. Docker Composeλ΅ μ‹¤ν–‰

```bash
cd /mnt/hdd1/jeon/dir-2
docker compose up -d --build
```

μ΄λ―Έ `0.0.0.0:ν¬νΈ`λ΅ μ„¤μ •λμ–΄ μμ–΄μ„ **ν¬νΈν¬μ›λ”© μ—†μ΄λ„ μ™Έλ¶€ μ ‘κ·Ό κ°€λ¥**ν•©λ‹λ‹¤.

### 2. μ ‘κ·Ό λ°©λ²•

**κ³µμΈ IPλ΅ μ§μ ‘ μ ‘κ·Ό:**
- FastAPI: `http://59.14.241.229:8001`
- Next.js: `http://59.14.241.229:3006`

**λ„λ©”μΈμΌλ΅ μ ‘κ·Ό (keti-ev1.iptime.orgκ°€ κ³µμΈ IPλ΅ λ§¤ν•‘λμ–΄ μλ‹¤λ©΄):**
- FastAPI: `http://keti-ev1.iptime.org:8001`
- Next.js: `http://keti-ev1.iptime.org:3006`

## π” ν™•μΈ μ‚¬ν•­

### μ„λ²„κ°€ μ§μ ‘ μ™Έλ¶€ μ ‘κ·Ό κ°€λ¥ν•μ§€ ν™•μΈ

```bash
# ν„μ¬ λ¦¬μ¤λ‹ μ¤‘μΈ ν¬νΈ ν™•μΈ
netstat -tuln | grep -E ':(8001|3006)'
# λλ”
ss -tuln | grep -E ':(8001|3006)'

# λ¨λ“  μΈν„°νμ΄μ¤(0.0.0.0)μ—μ„ λ¦¬μ¤λ‹ μ¤‘μ΄λ©΄ OK
```

### λ°©ν™”λ²½ ν™•μΈ

```bash
# UFW μ‚¬μ© μ‹
sudo ufw status
sudo ufw allow 8001/tcp
sudo ufw allow 3006/tcp

# iptables μ‚¬μ© μ‹
sudo iptables -L -n | grep -E '8001|3006'
```

## π“ μ¤‘μ” μ‚¬ν•­

1. **Docker Composeλ” μ΄λ―Έ `0.0.0.0`μΌλ΅ μ„¤μ •λ¨**
   - λ¨λ“  λ„¤νΈμ›ν¬ μΈν„°νμ΄μ¤μ—μ„ μ ‘κ·Ό κ°€λ¥
   - ν¬νΈν¬μ›λ”© μ—†μ΄λ„ μ™Έλ¶€ μ ‘κ·Ό κ°€λ¥

2. **λ°©ν™”λ²½λ§ μ—΄μ–΄μ£Όλ©΄ λ¨**
   - ν¬νΈ 8001, 3006μ΄ μ—΄λ ¤μμ–΄μ•Ό ν•¨

3. **κ³µμΈ IP ν™•μΈ**
   - `curl ifconfig.me` λλ” `curl icanhazip.com`

## π§ ν…μ¤νΈ

### λ΅μ»¬μ—μ„ ν…μ¤νΈ
```bash
curl http://localhost:8001/health
curl http://localhost:3006
```

### μ™Έλ¶€μ—μ„ ν…μ¤νΈ (λ‹¤λ¥Έ μ»΄ν“¨ν„°/μ¤λ§νΈν°)
```bash
# κ³µμΈ IPλ΅
curl http://59.14.241.229:8001/health
curl http://59.14.241.229:3006

# λ„λ©”μΈμΌλ΅ (λ§¤ν•‘λμ–΄ μλ‹¤λ©΄)
curl http://keti-ev1.iptime.org:8001/health
curl http://keti-ev1.iptime.org:3006
```

## π’΅ ν¬νΈν¬μ›λ”©μ΄ ν•„μ”ν• κ²½μ°

ν¬νΈν¬μ›λ”©μ€ λ‹¤μ κ²½μ°μ—λ§ ν•„μ”ν•©λ‹λ‹¤:
- μ„λ²„κ°€ NAT λ’¤μ— μμ–΄μ„ κ³µμΈ IPκ°€ μ—†μ„ λ•
- λΌμ°ν„°κ°€ μ™Έλ¶€ μ”μ²­μ„ λ‚΄λ¶€ μ„λ²„λ΅ μ „λ‹¬ν•΄μ•Ό ν•  λ•

**ν„μ¬ μ„λ²„κ°€ κ³µμΈ IPλ¥Ό κ°€μ§€κ³  μλ‹¤λ©΄ ν¬νΈν¬μ›λ”© λ¶ν•„μ”!**

## π― κ²°λ΅ 

1. `docker compose up -d --build` μ‹¤ν–‰
2. λ°©ν™”λ²½μ—μ„ ν¬νΈ 8001, 3006 μ—΄κΈ°
3. `http://κ³µμΈIP:ν¬νΈ` λλ” `http://keti-ev1.iptime.org:ν¬νΈ`λ΅ μ ‘κ·Ό

ν¬νΈν¬μ›λ”© μ„¤μ •μ€ ν•„μ” μ—†μµλ‹λ‹¤!

